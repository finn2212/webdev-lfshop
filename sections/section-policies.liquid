<!-- /sections/section-policies.liquid -->

<div
  class="section-policies {{ section.settings.bg }}"
  style="--PT: {{ section.settings.padding_top }}px; --PB: {{ section.settings.padding_bottom }}px;"
>
  <div class="{{ section.settings.width }} section-padding">
    <div class="section--wrapped">
      <div class="page__content">
        {% if section.settings.title != blank %}
          <h2 class="h4--body">{{ section.settings.title }}</h2>
        {% endif %}

        <div class="page--policy grid grid--uniform">
          {%- for block in section.blocks -%}
            {%- liquid
              assign linked_class = ''
              if block.settings.link
                assign linked_class = 'policy__block--linked'
              endif

              assign custom_class = ''
              if block.settings.icon_alt == blank
                assign custom_class = ' icon__column__icon--rounded'
              endif

              if section.settings.show_icon_bg and block.settings.icon_alt == blank
                assign custom_class = custom_class | append: ' icon__column__icon--bg'
              endif
            -%}

            <div class="grid__item medium-up--one-half" {{ block.shopify_attributes }}>
              <div class="policy__block {{ linked_class }} {{ section.settings.icon_size }}">
                <div class="icon__column__icon{{ custom_class }}" style="--stroke: {{ block.settings.icon_color }};">
                  {%- if block.settings.icon_alt != blank -%}
                    {%- render 'image-fill', img_object: block.settings.icon_alt -%}
                  {%- else -%}
                    {%- render 'icons', filename: block.settings.icon_name -%}
                  {%- endif -%}
                </div>
                {%- if block.settings.title != blank -%}
                  <div class="policy__title h6">
                    {{ block.settings.title }}
                  </div>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <div class="rte policy__content">
                    {{ block.settings.text }}
                  </div>
                {%- endif -%}
                {%- if block.settings.link != blank -%}
                  <a href="{{ block.settings.link }}" class="link-over-image"></a>
                {%- endif -%}
              </div>
            </div>
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Policy links",
  "class": "contact__policy",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Helpful information"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "select",
      "id": "icon_size",
      "label": "Icon size",
      "default": "icon--large",
      "options": [
        {"value": "icon--small", "label": "Small"},
        {"value": "icon--medium", "label": "Medium"},
        {"value": "icon--large", "label": "Large"}
      ]
    },
    {
      "type": "checkbox",
      "id": "show_icon_bg",
      "label": "Show icon background",
      "default": true
    },
    {
      "type": "select",
      "id": "bg",
      "label": "Background color",
      "default": "palette--light bg--neutral",
      "options": [
        {"value": "palette--light bg--neutral", "label": "Default"},
        {"value": "palette--light bg--accent", "label": "Light"},
        {"value": "palette--dark bg--invert", "label": "Dark"},
        {"value": "palette--dark bg--invert--accent", "label": "Dark accent"}
      ]
    },
    {
      "type": "header",
      "content": "Section spacing"
    },
    {
      "type": "select",
      "id": "width",
      "label": "Width",
      "default": "wrapper",
      "options": [
        {"value": "wrapper--full", "label": "Full width padded"},
        {"value": "wrapper", "label": "Page width"},
        {"value": "wrapper--narrow", "label": "Page width narrow"}
      ]
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 180,
      "step": 2,
      "unit": "px",
      "label": "Padding bottom",
      "default": 36
    }
  ],
  "blocks": [
    {
      "name": "Policy",
      "type": "policy",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Privacy policy",
          "info": "Example: Privacy policy"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "Text",
          "default": "<p>This tab content type will accept <strong>rich text</strong> to help with adding styles and links to additional pages or content. Use this to add supplementary information to help your buyers.</p>"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "icon_name",
          "label": "Icon",
          "default": "icon-award",
          "options": [
            {"value": "icon-animal", "label": "Animal"},
            {"value": "icon-animal-paw", "label": "Animal paw"},
            {"value": "icon-award", "label": "Award"},
            {"value": "icon-basket-like", "label": "Basket like"},
            {"value": "icon-basket-return", "label": "Basket return"},
            {"value": "icon-cart-check", "label": "Cart check"},
            {"value": "icon-cart-message", "label": "Cart message"},
            {"value": "icon-chat", "label": "Chat"},
            {"value": "icon-dollar", "label": "Dollar"},
            {"value": "icon-earth", "label": "Earth"},
            {"value": "icon-email", "label": "Email"},
            {"value": "icon-gluten-free", "label": "Gluten free"},
            {"value": "icon-iron", "label": "Iron"},
            {"value": "icon-leaf", "label": "Leaf"},
            {"value": "icon-legal", "label": "Legal"},
            {"value": "icon-lock-card", "label": "Lock card"},
            {"value": "icon-lock-shield", "label": "Lock shield"},
            {"value": "icon-lock-window", "label": "Lock window"},
            {"value": "icon-payment", "label": "Payment"},
            {"value": "icon-phone", "label": "Phone"},
            {"value": "icon-rating", "label": "Rating"},
            {"value": "icon-star-rating", "label": "Rating star"},
            {"value": "icon-recycled", "label": "Recycled"},
            {"value": "icon-ruler", "label": "Ruler"},
            {"value": "icon-send", "label": "Send"},
            {"value": "icon-sewing-machine", "label": "Sewing machine"},
            {"value": "icon-share", "label": "Share"},
            {"value": "icon-shipment-world", "label": "Shipment world"},
            {"value": "icon-shipment", "label": "Shipment"},
            {"value": "icon-shoes", "label": "Shoes"},
            {"value": "icon-store", "label": "Store"},
            {"value": "icon-support-headphones", "label": "Support headphones"},
            {"value": "icon-thread", "label": "Thread"},
            {"value": "icon-truck", "label": "Truck"},
            {"value": "icon-washer", "label": "Washer"},
            {"value": "icon-water", "label": "Water"}
          ]
        },
        {
          "type": "image_picker",
          "id": "icon_alt",
          "label": "Alternative icon/image"
        },
        {
          "type": "color",
          "id": "icon_color",
          "label": "Icon color",
          "default": "#060F9E"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Policy links",
      "category": "Text",
      "blocks": [
        {
          "type": "policy"
        },
        {
          "type": "policy"
        }
      ]
    }
  ],
  "disabled_on": {
    "groups": ["header", "aside"]
  }
}
{% endschema %}
